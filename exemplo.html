<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <title>Guiga</title>
  <style>
    .widget, section {
      float: left;
    }
    .widget label {
      display: block;
    }
    br {
      clear: both;
    }
  </style>
</head>
<body>
  <form>
    <section>
      <input type="text" name="busca" data-label="Busca">
      <input type="text" name="qualquercoisa" data-label="Qualquer coisa">
    </section>
    <br>
    <section>
      <input type="text" name="nome" data-label="Primeiro nome">
      <br>
      <input type="text" name="sobrenome" data-label="Sobrenome">
    </section>
    <section>
      <textarea data-label="Adonde"></textarea>
    </section>
    <br>
    <input type="submit">
  </form>
</body>
<script src="jquery.js" type="text/javascript"></script>
<script>
  $.each($(':input:not(:button, :submit)'), function() {
    var type = $(this).attr('type'),
        id   = $(this).attr('id'),
        name = $(this).attr('name'),
        label_text = $(this).attr('data-label');

    // Set ID = NAME if ID dont exist
    if (name && !id)
      $(this).attr('id', name + '-id');

    id = ($(this).attr('id') || '');

    // Create input widget
    var label = $("<label for='" + id + "'>" + (label_text || '&nbsp;') + "</label>");

    $(this).wrap("<div class='widget' />");

    (type == 'checkbox' || type == 'radio') ?
      $(this).after(label) : $(this).before(label);
  });
</script>
</html>
